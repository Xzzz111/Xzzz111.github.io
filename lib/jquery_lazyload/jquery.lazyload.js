(function(l,r,n,a){var h=l(r);l.fn.lazyload=function(e){var o=this;var t;var f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:r,data_attribute:"original",skip_invisible:false,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function i(){var t=0;o.each(function(){var e=l(this);if(f.skip_invisible&&!e.is(":visible")){return}if(l.abovethetop(this,f)||l.leftofbegin(this,f)){}else if(!l.belowthefold(this,f)&&!l.rightoffold(this,f)){e.trigger("appear");t=0}else{if(++t>f.failure_limit){return false}}})}if(e){if(a!==e.failurelimit){e.failure_limit=e.failurelimit;delete e.failurelimit}if(a!==e.effectspeed){e.effect_speed=e.effectspeed;delete e.effectspeed}l.extend(f,e)}t=f.container===a||f.container===r?h:l(f.container);if(0===f.event.indexOf("scroll")){t.bind(f.event,function(){return i()})}this.each(function(){var r=this;var n=l(r);r.loaded=false;if(n.attr("src")===a||n.attr("src")===false){if(n.is("img")){n.attr("src",f.placeholder)}}n.one("appear",function(){if(!this.loaded){if(f.appear){var e=o.length;f.appear.call(r,e,f)}l("<img />").bind("load",function(){var e=n.attr("data-"+f.data_attribute);n.hide();if(n.is("img")){n.attr("src",e)}else{n.css("background-image","url('"+e+"')")}n[f.effect](f.effect_speed);r.loaded=true;var t=l.grep(o,function(e){return!e.loaded});o=l(t);if(f.load){var i=o.length;f.load.call(r,i,f)}}).attr("src",n.attr("data-"+f.data_attribute))}});if(0!==f.event.indexOf("scroll")){n.bind(f.event,function(){if(!r.loaded){n.trigger("appear")}})}});h.bind("resize",function(){i()});if(/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)){h.bind("pageshow",function(e){if(e.originalEvent&&e.originalEvent.persisted){o.each(function(){l(this).trigger("appear")})}})}l(n).ready(function(){i()});return this};l.belowthefold=function(e,t){var i;if(t.container===a||t.container===r){i=(r.innerHeight?r.innerHeight:h.height())+h.scrollTop()}else{i=l(t.container).offset().top+l(t.container).height()}return i<=l(e).offset().top-t.threshold};l.rightoffold=function(e,t){var i;if(t.container===a||t.container===r){i=h.width()+h.scrollLeft()}else{i=l(t.container).offset().left+l(t.container).width()}return i<=l(e).offset().left-t.threshold};l.abovethetop=function(e,t){var i;if(t.container===a||t.container===r){i=h.scrollTop()}else{i=l(t.container).offset().top}return i>=l(e).offset().top+t.threshold+l(e).height()};l.leftofbegin=function(e,t){var i;if(t.container===a||t.container===r){i=h.scrollLeft()}else{i=l(t.container).offset().left}return i>=l(e).offset().left+t.threshold+l(e).width()};l.inviewport=function(e,t){return!l.rightoffold(e,t)&&!l.leftofbegin(e,t)&&!l.belowthefold(e,t)&&!l.abovethetop(e,t)};l.extend(l.expr[":"],{"below-the-fold":function(e){return l.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!l.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return l.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!l.rightoffold(e,{threshold:0})},"in-viewport":function(e){return l.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!l.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return l.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!l.rightoffold(e,{threshold:0})}})})(jQuery,window,document);